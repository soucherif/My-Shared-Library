def call() {
    withKubeConfig(caCertificate: ''' LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCakNDQWU2Z0F3SUJBZ0lCQVRBTkJna3Fo
a2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwdGFXNXAKYTNWaVpVTkJNQjRYRFRJek1Ea3hN
VEUzTlRVMU1Gb1hEVE16TURrd09URTNOVFUxTUZvd0ZURVRNQkVHQTFVRQpBeE1LYldsdWFXdDFZ
bVZEUVRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBSk9oCkxDai93
eEp3azNQTENSV05vVkVZdnZRTXZjTFNjazNOMnpyZy8xbXlaUmNKUVd6L2hxai8vQXhJeUhrdWtF
TjcKdFpBcEtZUGVOaXZCcXE3aFUwT0JPYisvVlhWdEcyekZYOXU5OHRLS3ZyMXBjNmh0V2xxTVYx
djJDZmxsNDA3NwpvZmplbUJ3TVJ4OFFHZU91TFY3NWgyOVgyWjlXajFWYjR1WGUxR2QvVzJjbXQy
aWJBWHBxelIvcjFER0s0Y2RrCkl3M0dsUmFIZldPTDV0WE54eDdLaTBVNGMzMWlqYUxady9DRkZ2
RENwTmFmUmdERitDZFUwRVBRaSszcnR1c3oKVmNLelhMZXE0MGhIQ1NWQVdtZTBkQWsvV25NbGtQ
UHdBcXBwdCtyb2J0VFpNNXR5Ym9mZjlxcG5VZnZ4Z1EvOQpXbmFBTVlueVZuR0JmNzJDMmRNQ0F3
RUFBYU5oTUY4d0RnWURWUjBQQVFIL0JBUURBZ0trTUIwR0ExVWRKUVFXCk1CUUdDQ3NHQVFVRkJ3
TUNCZ2dyQmdFRkJRY0RBVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQjBHQTFVZERnUVcKQkJRUEFP
NlY5dzdXWVFuUjcyakY3QVBjTkhxN29EQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FRRUFhRmszaFVN
RQozUWZ5TU9mZExJeHgvRHFqaUwvdGtSOTNiekVKaHFIWmNXRXlwdHhtelhpZEJyb3d5N0JuYURK
UVltZ0xHZDc3CmhMU2NiMnN1WWFVdGZKeHdpU1E0ZnBEa2JCdlh3RHFjVjhsMW1WRjlBbXhMTWxP
Lyt6ODY2bTJRcXVoZlVqaEQKNFJOVG5tUHpsRk9QYVVYelZBS3Q1d1N1QlVubmRuZzkwSDl0dnZG
M1pnSGhTcGVtODJjdHhnWkgrUStVSHE0WgpIV0cxMU5zZDZ5TzVDZ2ptVzJLRjNUcmExaDJPRTQ5
M20wNnpzWjR2bDZTdWRTekI1a0RVTDloaTVocmt0M3c3Ck5JV1hVZnBoTzFZOFNzRG9NQS9NVU1l
eW1QZFp4RUlIVmlSbUFJdHRISmJSUThvajB0Yng2YlduajNHTHNFenAKa200RmZuV0FKL1h1OFE9
PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    ''', clusterName: 'minikube', contextName: 'minikube', credentialsId: 'Key', namespace: 'argocd', restrictKubeConfigAccess: false, serverUrl: 'https://192.168.49.2:8443') {
    sh " kubectl apply -f atm-app.yaml" 
}
      
    
}

